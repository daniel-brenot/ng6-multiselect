!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("ng6-multiselect",["exports","@angular/core","@angular/forms","@angular/platform-browser"],t):t(e["ng6-multiselect"]={},e.ng.core,e.ng.forms,e.ng.platformBrowser)}(this,function(e,t,i,r){"use strict";function N(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}var s=function(){},n=function(){function e(e){this.cd=e,this.emptyTitle="Select Items",this.selectedTitle="Item(s) Selected",this.data=[],this.displayData=[],this.displayDataOld=[],this.onSelectChange=new t.EventEmitter,this.onSelect=new t.EventEmitter,this.onDeselect=new t.EventEmitter,this.displayItems=[],this.pgroups={},this.sgroups={},this.ungrouped=[],this.focused=!1,this.open=!1,this.numSelected=0,this.onTouchedCallback=s,this.onChangeCallback=s}return e.prototype.ngOnInit=function(){this.generateDisplayItems()},e.prototype.generateDisplayItems=function(){this.pgroups={},this.sgroups={},this.ungrouped=[],this.displayItems=[];var e,t,i,r,s,n,o,a,l,p,c=[];try{for(var d=N(this.displayData),h=d.next();!h.done;h=d.next()){var u=h.value;c.push({type:"item",id:u.id})}}catch(w){e={error:w}}finally{try{h&&!h.done&&(t=d["return"])&&t.call(d)}finally{if(e)throw e.error}}try{for(var y=N(this.displayData),f=y.next();!f.done;f=y.next()){(v=f.value).primaryGroup?this.addPGroup(v):this.addUngrouped(v),v.secondaryGroup&&this.addSGroup(v)}}catch(C){i={error:C}}finally{try{f&&!f.done&&(r=y["return"])&&r.call(y)}finally{if(i)throw i.error}}for(var g in this.isGroupSelected(c)?this.displayItems.push({type:"deselectAll"}):this.displayItems.push({type:"selectAll"}),this.sgroups)this.isGroupSelected(this.sgroups[g])?this.displayItems.push({type:"deselectS",group:g}):this.displayItems.push({type:"selectS",group:g});try{for(var m=N(this.ungrouped),x=m.next();!x.done;x=m.next()){var v=x.value;this.displayItems.push({type:"item",id:v.id,name:v.itemName,checked:this.data.includes(v.id)})}}catch(D){s={error:D}}finally{try{x&&!x.done&&(n=m["return"])&&n.call(m)}finally{if(s)throw s.error}}for(var g in this.pgroups){this.displayItems.push({type:"gname",title:g,selected:this.isGroupSelected(this.pgroups[g])});try{for(var S=N(this.pgroups[g]),b=S.next();!b.done;b=S.next()){v=b.value;this.displayItems.push({type:"item",id:v.id,name:v.itemName,checked:this.data.includes(v.id)})}}catch(O){o={error:O}}finally{try{b&&!b.done&&(a=S["return"])&&a.call(S)}finally{if(o)throw o.error}}}this.numSelected=0;try{for(var k=N(this.displayData),I=k.next();!I.done;I=k.next()){u=I.value;this.data.includes(u.id)&&this.numSelected++}}catch(G){l={error:G}}finally{try{I&&!I.done&&(p=k["return"])&&p.call(k)}finally{if(l)throw l.error}}},e.prototype.ngDoCheck=function(){console.log("check"),JSON.stringify(this.displayData)!==JSON.stringify(this.displayDataOld)&&(Object.assign(this.displayDataOld,this.displayData),this.cd.markForCheck(),this.generateDisplayItems())},e.prototype.isGroupSelected=function(e){try{for(var t=N(e),i=t.next();!i.done;i=t.next()){var r=i.value;if(!this.data.includes(r.id))return!1}}catch(o){s={error:o}}finally{try{i&&!i.done&&(n=t["return"])&&n.call(t)}finally{if(s)throw s.error}}return!0;var s,n},e.prototype.addPGroup=function(e){null==this.pgroups[e.primaryGroup]?this.pgroups[e.primaryGroup]=[e]:this.pgroups[e.primaryGroup].push(e)},e.prototype.addSGroup=function(e){null==this.sgroups[e.secondaryGroup]?this.sgroups[e.secondaryGroup]=[e]:this.sgroups[e.secondaryGroup].push(e)},e.prototype.addUngrouped=function(e){this.ungrouped.push(e)},e.prototype.onClicked=function(e){e.preventDefault(),e.stopPropagation(),this.focused=!0,this.open=!this.open,this.hovered=this.displayItems[0]||null},e.prototype.setHover=function(e){this.hovered=e},e.prototype.selectItem=function(e){if("gname"==e.type)if(1==e.selected){try{for(var t=N(this.pgroups[e.title]),i=t.next();!i.done;i=t.next()){var r=i.value;this.data.splice(this.data.indexOf(r.id),1)}}catch(O){f={error:O}}finally{try{i&&!i.done&&(g=t["return"])&&g.call(t)}finally{if(f)throw f.error}}this.onDeselect.emit(this.data),this.onSelectChange.emit(this.data)}else{try{for(var s=N(this.pgroups[e.title]),n=s.next();!n.done;n=s.next()){r=n.value;this.data.includes(r.id)||this.data.push(r.id)}}catch(G){m={error:G}}finally{try{n&&!n.done&&(x=s["return"])&&x.call(s)}finally{if(m)throw m.error}}this.onSelect.emit(this.data),this.onSelectChange.emit(this.data)}else if("selectS"==e.type){try{for(var o=N(this.sgroups[e.group]),a=o.next();!a.done;a=o.next()){r=a.value;this.data.includes(r.id)||this.data.push(r.id)}}catch(A){v={error:A}}finally{try{a&&!a.done&&(S=o["return"])&&S.call(o)}finally{if(v)throw v.error}}this.onSelect.emit(this.data),this.onSelectChange.emit(this.data)}else if("deselectS"==e.type){try{for(var l=N(this.sgroups[e.group]),p=l.next();!p.done;p=l.next()){r=p.value;this.data.splice(this.data.indexOf(r.id),1)}}catch(E){b={error:E}}finally{try{p&&!p.done&&(k=l["return"])&&k.call(l)}finally{if(b)throw b.error}}this.onDeselect.emit(this.data),this.onSelectChange.emit(this.data)}else if("item"==e.type)e.checked?(this.data.splice(this.data.indexOf(e.id),1),this.onDeselect.emit(this.data)):(this.data.push(e.id),this.onSelect.emit(this.data)),this.onSelectChange.emit(this.data);else if("selectAll"==e.type){this.data.splice(0,this.data.length);try{for(var c=N(this.displayData),d=c.next();!d.done;d=c.next()){var h=d.value;this.data.push(h.id)}}catch(T){I={error:T}}finally{try{d&&!d.done&&(w=c["return"])&&w.call(c)}finally{if(I)throw I.error}}this.onSelectChange.emit(this.data)}else{try{for(var u=N(this.displayData),y=u.next();!y.done;y=u.next()){h=y.value;this.data.splice(this.data.indexOf(h.id),1)}}catch(M){C={error:M}}finally{try{y&&!y.done&&(D=u["return"])&&D.call(u)}finally{if(C)throw C.error}}this.onSelectChange.emit(this.data)}var f,g,m,x,v,S,b,k,I,w,C,D;this.generateDisplayItems()},Object.defineProperty(e.prototype,"value",{get:function(){return this.data},set:function(e){this.data=e,this.onChangeCallback(e)},enumerable:!0,configurable:!0}),e.prototype.onBlur=function(){this.onTouchedCallback()},e.prototype.writeValue=function(e){this.data=e},e.prototype.registerOnChange=function(e){this.onChangeCallback=e},e.prototype.registerOnTouched=function(e){this.onTouchedCallback=e},e.prototype.clickedOutside=function(e){this.open||(this.focused=!1),this.open=!1},e.decorators=[{type:t.Component,args:[{selector:"ng6-multiselect",template:'<div onselectstart="return false" class="multiselectElement" (click)="onClicked($event)" [ngClass]="{\'multiselectFocus\':this.focused}">\n    <span style="margin-left:4px;">\n        <span *ngIf="numSelected==0">{{this.emptyTitle}}</span>\n        <span *ngIf="numSelected>0">{{numSelected +" "+ this.selectedTitle}}</span>\n    </span>\n    <span class="rightArrow">&#x25bc;</span>\n<div *ngIf="this.open" (click)="$event.preventDefault();$event.stopPropagation();" class="dropdown">\n    <div class="multiselectRow" (mouseenter)="setHover(item)" (click)="selectItem(item)" [ngClass]="{\'hoverHighlight\':hovered==item}" *ngFor="let item of displayItems">\n        <span *ngIf="item.type==\'selectAll\'"><input type="checkbox"/>Select All</span>\n        <span *ngIf="item.type==\'deselectAll\'"><input type="checkbox" checked/>UnSelect All</span>\n        <span *ngIf="item.type==\'selectS\'"><input type="checkbox"/>Select All {{item.group}}</span>\n        <span *ngIf="item.type==\'deselectS\'"><input type="checkbox" checked/>UnSelect All {{item.group}}</span>\n        <span *ngIf="item.type==\'gname\'"><input [checked]="item.selected==true" type="checkbox"/><b>{{item.title}}</b></span>\n        <span *ngIf="item.type==\'item\'" style="padding-left:20px"><input [checked]="item.checked==true" type="checkbox"/>{{item.name}}</span>\n    </div>\n</div>\n</div>',styles:[".multiselectElement{width:100%;height:20px;max-height:34px;border:1px solid #ccc;border-radius:4px;display:block;padding:6px 0;min-width:60px;font-size:14px;line-height:1.42857143;color:#555;cursor:default;transition:border-color .15s ease-in-out;background-color:#fff}.multiselectFocus{box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);outline:0;border:1px solid #66afe9}.dropdown{position:relative;width:calc(100% + 2px);top:7px;left:-1px;z-index:2;box-shadow:0 1px 5px #959595;border:1px solid #ccc;background-color:#fff;min-height:20px;max-height:400px;overflow-y:auto}.rightArrow{color:#555;padding-right:0;font-size:10px;margin:4px 3px auto auto;float:right}.multiselectRow{padding-left:4px}.hoverHighlight{background-color:#cce8ff}input[type=checkbox]{margin-right:5px}"],providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:e,multi:!0}]}]}],e.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},e.propDecorators={emptyTitle:[{type:t.Input}],selectedTitle:[{type:t.Input}],data:[{type:t.Input,args:["ngModel"]}],displayData:[{type:t.Input,args:["data"]}],onSelectChange:[{type:t.Output,args:["onSelectChange"]}],onSelect:[{type:t.Output,args:["onSelect"]}],onDeselect:[{type:t.Output,args:["onDeselect"]}],clickedOutside:[{type:t.HostListener,args:["document:click",["$event"]]}]},e}(),o=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.BrowserModule,i.FormsModule],declarations:[n],exports:[n]}]}],e}();e.Ng6MultiselectComponent=n,e.Ng6MultiselectModule=o,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng6-multiselect.umd.min.js.map